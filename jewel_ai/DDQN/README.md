📌 Project Overview

本專題使用 Double Deep Q-Network (DDQN) 訓練一款自製的 三消遊戲（Match-3 Game）。
遊戲具有 重力、隨機插入寶石、牆壁生成、游標移動、交換寶石 等特殊規則，比一般 match-3 更複雜。

強化學習的目標是在有限步數內最大化消除寶石的數量並延長遊戲，不讓畫面因為牆壁堆滿而死亡。

🎮 Game Environment
🧩 Board Specification

棋盤大小：9 × 6

共有 8 個通道 (one-hot) → shape = (9, 6, 8)

每個 layer 的含義如下：

Layer Index	Meaning
0	寶石 1
1	寶石 2
2	寶石 3
3	寶石 4
4	寶石 5
5	寶石 6
6	寶石 7
7	牆壁
8	游標位置

補充：
雖然寫 9×6×8，其實有第 8 層（游標）但通常不視為寶石類別，依你需要可調整為 9×6×9。

🎮 Actions (動作空間)

共 6 個動作：

Action ID	Description
0	無動作 (No-op)
1	游標上移
2	游標下移
3	游標左移
4	游標右移
5	點擊 (與右邊寶石互換)
🧱 Special Rules
🔹 初始狀態

遊戲一開始會生成 3 行不可消除的寶石（random but fixed）。

🔹 游標移動

透過上下左右移動游標，移到指定位置後可選擇點擊。

🔹 點擊交換寶石

執行 action = 5 時會：「
✔ 交換 當前位置 與 右邊位置 的寶石
❗ 注意：只能和右邊做交換（遊戲規則自定）
」

🔹 消除判定

若交換後形成：

3 連線

4 連線

5 連線

L 型

T 型

則會進行消除並觸發 重力掉落。

🔹 重力系統

任何空格會使上方寶石自動向下掉落。

🔹 插入新行 (Row Insertion)

遊戲中存在兩種插入方式：

環境固定每 X 步自動插入

玩家可以選擇「插入一行」作為策略的一部分

此機制會推動整個棋盤往上，增加遊戲壓力。

🧱 牆壁系統 (Wall Mechanism)

當步數達到一定條件後，環境會隨機產生一組牆壁

牆壁碼為 7（one-hot layer 7）

牆壁會整組生成（連續幾格）

牆壁不會被正常三消消除

必須消除牆壁相鄰的寶石
→ 相鄰寶石被消除後，牆壁會轉成「隨機寶石」

如果牆壁被頂上去？

若牆壁抵達最上層 → 新行無法再往上推

玩家必須優先處理牆壁，不然很快就會 Game Over
